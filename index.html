<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Coulomb Canvas</title>
  <link rel="stylesheet" href="styles.css" />

</head>

<body>
  <header>
  </header>

  <div id="topic-container"></div>

  <div class="circle-wrapper">
    <div class="circle-center">
      <img src="images/Avatar/Avatar.png" alt="Center" />
    </div>

    <div class="circle-menu" id="topic-container">
      <!-- Topic image buttons will go here via JS -->
    </div>
  </div>

  <div style="position: relative; width:1000px; height:auto;">
    <img id="logo" src="images/logo.png"/>
  </div>


  <script src="data/topics.js"></script>
  <script>
    document.body.style.overflow = "hidden";
    const topicContainer = document.getElementById("topic-container");

    topics.forEach(topic => {
      const link = document.createElement("a");
      link.href = `topic.html?topic=${topic.id}`;
      link.classList.add("topic-image-link");

      const img = document.createElement("img");
      img.src = topic.image;
      img.alt = topic.title;
      img.classList.add("topic-image");

    });

    document.addEventListener("DOMContentLoaded", () => {
      const topicContainer = document.getElementById("topic-container");
      const numberOfTopics = topics.length;
      let radius = 320; // distance from center
      const mq = window.matchMedia("(max-width: 768px)");

      function updateRadiusAndLayout() {
        if (mq.matches) {
          radius = window.innerWidth / 2.4;
        } else {
          radius = 320;
        }

        // REMOVE OLD ELEMENTS:
        topicContainer.innerHTML = "";

        // Now re-generate/render your elements with the new radius:
        topics.forEach((topic, index) => {
          topics.forEach((topic, index) => {
            const angle = ((index / numberOfTopics) * (2 * Math.PI)) - (Math.PI / 2);
            const x = Math.cos(angle) * radius;
            const y = Math.sin(angle) * radius;

            const link = document.createElement("a");
            link.href = `topic.html?topic=${topic.id}`;
            link.classList.add("topic-image-link");
            link.style.left = `calc(50vw + ${x}px)`; // 40px = half image width
            link.style.transform = 'translateX(-50%) translateY(-50%)';
            link.style.top = `calc(50vh + ${y}px`;

            const img = document.createElement("img");
            img.src = topic.image;
            img.alt = topic.title;
            img.classList.add("topic-image");

            const titleOverlay = document.createElement("div");
            titleOverlay.classList.add("topic-title");
            titleOverlay.textContent = topic.title;

            link.appendChild(img);
            link.appendChild(titleOverlay);
            topicContainer.appendChild(link);


          });
        });
      }

      // Hook to resize and media query changes:
      window.addEventListener("resize", updateRadiusAndLayout);
      mq.addEventListener("change", updateRadiusAndLayout);

      // Initial render:
      updateRadiusAndLayout();




    });


  </script>

</body>

</html>